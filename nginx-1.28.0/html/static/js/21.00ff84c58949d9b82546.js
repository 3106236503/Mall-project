webpackJsonp([21],{FWvd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Gu7T"),n=a.n(i),l=a("woOf"),s=a.n(l),r=a("vLgD");function o(e){return Object(r.a)({url:"/member/update",method:"post",data:e})}var c=a("n97X"),m=a("xT6B"),d={pageNum:1,pageSize:10,nickname:null,memberLevelId:null},u={username:void 0,password:void 0,id:null,nickname:null,phone:null,email:null,memberLevelId:null,balance:0,status:1},p={name:"memberList",data:function(){return{listQuery:s()({},d),list:[],total:0,currentPage:1,listLoading:!1,dialogVisible:!1,detailDialogVisible:!1,member:s()({},u),detailMember:s()({},u),isEdit:!1,memberLevels:[],rechargeDialogVisible:!1,rechargeForm:{memberId:null,integration:0,operateNote:"",memberInfo:{id:null,nickname:"",username:"",currentIntegration:0}},activeTab:"baseInfo",pointRecordList:[],pointRecordLoading:!1,pointRecordCurrentPage:1,pointRecordPageSize:10,pointRecordTotal:0,pointRecordQuery:{changeType:"",sourceType:"",timeRange:[]}}},watch:{currentPage:function(e){this.listQuery.pageNum=e},"listQuery.pageNum":function(e){this.currentPage=e},activeTab:function(e){"pointRecord"===e&&this.detailMember.id&&this.getPointRecord(this.detailMember.id)}},created:function(){this.getList(),this.getMemberLevels()},filters:{formatDateTime:function(e){if(null==e||""===e)return"N/A";var t="string"==typeof e?new Date(e):e;return Object(m.a)(t,"yyyy-MM-dd hh:mm:ss")}},methods:{getLevelTagType:function(e){var t=["","success","warning","danger","info"];return t[e%t.length]||"primary"},handleResetSearch:function(){this.listQuery=s()({},d)},handleSearchList:function(){this.listQuery.pageNum=1,this.getList()},handleSizeChange:function(e){this.listQuery.pageNum=1,this.currentPage=1,this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.currentPage=e,this.getList()},handlePrevClick:function(e){this.listQuery.pageNum=e,this.currentPage=e,this.getList()},handleNextClick:function(e){this.listQuery.pageNum=e,this.currentPage=e,this.getList()},handleAdd:function(){this.dialogVisible=!0,this.isEdit=!1,this.member=s()({},u),this.memberLevels.length>0&&(this.member.memberLevelId=this.memberLevels[0].id)},handleStatusChange:function(e,t){var a=this;this.$confirm("是否修改该会员状态?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o({id:t.id,status:t.status}).then(function(){a.$message({type:"success",message:"修改成功!"})}).catch(function(){a.$message({type:"error",message:"修改失败!"}),a.getList()})}).catch(function(){a.$message({type:"info",message:"取消修改"}),a.getList()})},handleDelete:function(e,t){var a=this;this.$confirm("是否删除该会员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e=t.id,Object(r.a)({url:"/member/delete/",method:"post",params:{id:e}})).then(function(e){e&&200===e.code?(a.$message({type:"success",message:"删除成功!"}),a.getList()):a.$message({type:"error",message:e&&e.message||"删除失败!"})}).catch(function(){a.$message({type:"error",message:"网络错误，请稍后重试!"})})}).catch(function(){a.$message({type:"info",message:"取消删除"})})},handleUpdate:function(e,t){this.dialogVisible=!0,this.isEdit=!0,this.member=s()({},t)},handleView:function(e,t){var a,i=this;this.detailDialogVisible=!0,this.activeTab="baseInfo",this.pointRecordCurrentPage=1,this.resetPointRecordQuery(),this.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),(a=t.id,Object(r.a)({url:"/member/detail",method:"get",params:{id:a}})).then(function(e){i.detailMember=e&&e.data||s()({},u),e&&e.data||i.$message.warning("获取会员详情数据不完整")}).catch(function(){i.$message.error("获取会员详情失败，请稍后重试"),i.detailDialogVisible=!1,i.detailMember=s()({},u)}).finally(function(){i.$loading().close()})},handleDialogConfirm:function(){var e=this;this.$confirm("是否确认操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t;(e.isEdit?o(e.member):(t=e.member,Object(r.a)({url:"/member/create",method:"post",data:t}))).then(function(){e.$message({type:"success",message:e.isEdit?"修改成功!":"添加成功!"}),e.dialogVisible=!1,e.getList()})})},handleRecharge:function(e,t){this.rechargeForm={memberId:t.id,integration:0,operateNote:"",memberInfo:{id:t.id,nickname:t.nickname,username:t.username,currentIntegration:t.integration||0}},this.rechargeDialogVisible=!0},handleRechargeConfirm:function(){var e,t,a=this;!this.rechargeForm.integration||this.rechargeForm.integration<=0?this.$message({type:"warning",message:"请输入有效的积分数"}):(e=this.rechargeForm.memberId,t={integration:this.rechargeForm.integration,operateNote:this.rechargeForm.operateNote},Object(r.a)({url:"/member/recharge",method:"post",params:{id:e,integration:t.integration,operateNote:t.operateNote}})).then(function(){a.$message({type:"success",message:"充值成功!"}),a.rechargeDialogVisible=!1,a.getList(),a.detailDialogVisible&&a.detailMember.id===a.rechargeForm.memberId&&a.getPointRecord(a.rechargeForm.memberId)}).catch(function(e){console.error("充值失败：",e),a.$message({type:"error",message:"充值失败!"})})},getList:function(){var e,t=this;this.listLoading=!0,(e=this.listQuery,Object(r.a)({url:"/member/listAll",method:"get",params:e})).then(function(e){var a=e&&e.data&&e.data.list||[],i=[].concat(n()(a));t.listQuery.nickname&&(i=i.filter(function(e){return(e.nickname&&e.nickname.toLowerCase()).includes(t.listQuery.nickname.toLowerCase())})),t.listQuery.memberLevelId&&(i=i.filter(function(e){return e.memberLevelId===t.listQuery.memberLevelId})),t.total=i.length;var l=t.listQuery,s=l.pageNum,r=l.pageSize,o=(s-1)*r;t.list=i.slice(o,o+r)}).catch(function(){t.list=[],t.total=0}).finally(function(){t.listLoading=!1})},getMemberLevels:function(){var e=this;Object(c.c)({}).then(function(t){t&&t.data?e.memberLevels=Array.isArray(t.data)?t.data:t.data.list||[]:e.memberLevels=[]}).catch(function(){e.memberLevels=[],e.$message.error("获取会员等级失败，请检查网络")})},getLevelName:function(e){if(!e||!this.memberLevels.length)return null;var t=this.memberLevels.find(function(t){return t.id===e});return t?t.name:null},getPointRecord:function(e){var t=this;e&&(this.pointRecordLoading=!0,function(e){return Object(r.a)({url:"/member/history",method:"GET",params:{memberId:e.memberId,pageNum:e.pageNum||1,pageSize:e.pageSize||10}})}({memberId:e,pageNum:this.pointRecordCurrentPage,pageSize:this.pointRecordPageSize,changeType:this.pointRecordQuery.changeType||void 0,sourceType:this.pointRecordQuery.sourceType||void 0,startTime:this.pointRecordQuery.timeRange[0]?new Date(this.pointRecordQuery.timeRange[0]).getTime():void 0,endTime:this.pointRecordQuery.timeRange[1]?new Date(this.pointRecordQuery.timeRange[1]).getTime()+864e5-1:void 0}).then(function(e){t.pointRecordLoading=!1,e&&200===e.code&&e.data?(t.pointRecordList=e.data.list||[],t.pointRecordTotal=e.data.total||0):(t.pointRecordList=[],t.pointRecordTotal=0,t.$message.warning("未查询到积分记录"))}).catch(function(e){t.pointRecordLoading=!1,t.pointRecordList=[],t.pointRecordTotal=0;var a=e&&e.response&&e.response.data&&e.response.data.message||"网络异常";t.$message.error("获取积分记录失败："+a)}))},handlePointRecordSizeChange:function(e){this.pointRecordPageSize=e,this.pointRecordCurrentPage=1,this.getPointRecord(this.detailMember.id)},handlePointRecordCurrentChange:function(e){this.pointRecordCurrentPage=e,this.getPointRecord(this.detailMember.id)},resetPointRecordQuery:function(){this.pointRecordQuery={changeType:"",sourceType:"",timeRange:[]}},getPointTypeName:function(e){return({0:"购物",1:"管理员修改",2:"充值",3:"签到",4:"补签"}[e.sourceType]||"未知来源("+e.sourceType+")")+"-"+({0:"积分增加",1:"积分减少"}[e.changeType]||"未知变动("+e.changeType+")")},getPointTypeTag:function(e){switch(e){case 0:return"success";case 1:return"danger";default:return"primary"}}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"filter-container",attrs:{shadow:"hover","body-style":{padding:"20px"}}},[a("div",{staticClass:"filter-header"},[a("i",{staticClass:"el-icon-search filter-icon"}),e._v(" "),a("span",{staticClass:"filter-title"},[e._v("筛选搜索")])]),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-form",{attrs:{inline:!0,model:e.listQuery,size:"small","label-width":"120px"}},[a("el-form-item",{attrs:{label:"会员名称："}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入会员名称",clearable:"","prefix-icon":"el-icon-user"},model:{value:e.listQuery.nickname,callback:function(t){e.$set(e.listQuery,"nickname",t)},expression:"listQuery.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"会员等级："}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择会员等级",clearable:""},model:{value:e.listQuery.memberLevelId,callback:function(t){e.$set(e.listQuery,"memberLevelId",t)},expression:"listQuery.memberLevelId"}},e._l(e.memberLevels,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),e._v(" "),a("div",{staticClass:"filter-actions"},[a("el-button",{staticClass:"search-btn",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:function(t){return e.handleSearchList()}}},[e._v("\n        查询搜索\n      ")]),e._v(" "),a("el-button",{staticClass:"reset-btn",attrs:{size:"small",icon:"el-icon-refresh"},on:{click:function(t){return e.handleResetSearch()}}},[e._v("\n        重置\n      ")])],1)]),e._v(" "),a("el-card",{staticClass:"operate-container",attrs:{shadow:"hover","body-style":{padding:"15px 20px"}}},[a("div",{staticClass:"operate-header"},[a("i",{staticClass:"el-icon-tickets operate-icon"}),e._v(" "),a("span",{staticClass:"operate-title"},[e._v("会员列表")]),e._v(" "),a("el-button",{staticClass:"btn-add",attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("\n        添加会员\n      ")])],1)]),e._v(" "),a("div",{staticClass:"table-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"memberTable",staticClass:"member-table",staticStyle:{width:"100%"},attrs:{data:e.list,border:"",stripe:"","header-cell-style":{background:"#f5f7fa",color:"#606266",fontWeight:"600"},"cell-style":{padding:"12px 8px"}}},[a("el-table-column",{attrs:{label:"会员编号",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"member-id"},[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"会员名称",align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"member-name"},[a("i",{staticClass:"el-icon-user"}),e._v("\n            "+e._s(t.row.nickname)+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"会员等级",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.getLevelName(t.row.memberLevelId)?a("el-tag",{staticClass:"level-tag",attrs:{type:e.getLevelTagType(t.row.memberLevelId)}},[e._v("\n            "+e._s(e.getLevelName(t.row.memberLevelId))+"\n          ")]):a("el-tag",{attrs:{type:"info"}},[e._v("普通会员")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号码",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"phone-number"},[a("i",{staticClass:"el-icon-phone"}),e._v("\n            "+e._s(t.row.phone||"-")+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"积分",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"integration-value"},[e._v(e._s(t.row.integration||0))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"注册时间",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"time-info"},[a("i",{staticClass:"el-icon-time"}),e._v("\n            "+e._s(e._f("formatDateTime")(t.row.createTime))+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最后登录",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"time-info"},[a("i",{staticClass:"el-icon-success"}),e._v("\n            "+e._s(e._f("formatDateTime")(t.row.lastLoginTime))+"\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"账户余额",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"balance-amount"},[e._v(e._s(t.row.balance||0)+" 元")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.handleStatusChange(t.$index,t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{staticClass:"action-btn",attrs:{size:"mini",type:"primary",icon:"el-icon-view"},on:{click:function(a){return e.handleView(t.$index,t.row)}}}),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{size:"mini",type:"success",icon:"el-icon-edit"},on:{click:function(a){return e.handleUpdate(t.$index,t.row)}}}),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})],1),e._v(" "),a("el-button",{staticClass:"action-btn",attrs:{size:"mini",type:"info",icon:"el-icon-plus"},on:{click:function(a){return e.handleRecharge(t.$index,t.row)}}})]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{staticClass:"custom-pagination",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-size":e.listQuery.pageSize,"page-sizes":[10,15,20],"pager-count":7,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"prev-click":e.handlePrevClick,"next-click":e.handleNextClick},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),e._v(" "),a("el-dialog",{staticClass:"detail-dialog",attrs:{title:"会员详情",visible:e.detailDialogVisible,width:"70%","close-on-click-modal":!1},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[a("el-tabs",{staticClass:"member-detail-tabs",attrs:{type:"card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"baseInfo"}},[a("el-descriptions",{staticClass:"member-details",attrs:{column:2,border:""}},[a("el-descriptions-item",{attrs:{label:"会员编号","label-class-name":"detail-label"}},[a("span",{staticClass:"detail-value"},[e._v(e._s(e.detailMember.id))])]),e._v(" "),a("el-descriptions-item",{attrs:{label:"积分","label-class-name":"detail-label"}},[a("span",{staticClass:"detail-value integration"},[e._v(e._s(e.detailMember.integration||0))])]),e._v(" "),a("el-descriptions-item",{attrs:{label:"会员名称","label-class-name":"detail-label"}},[a("span",{staticClass:"detail-value"},[e._v(e._s(e.detailMember.nickname))])]),e._v(" "),a("el-descriptions-item",{attrs:{label:"手机号码","label-class-name":"detail-label"}},[a("span",{staticClass:"detail-value"},[e._v(e._s(e.detailMember.phone))])]),e._v(" "),a("el-descriptions-item",{attrs:{label:"邮箱","label-class-name":"detail-label"}},[a("span",{staticClass:"detail-value"},[e._v(e._s(e.detailMember.email||"-"))])]),e._v(" "),a("el-descriptions-item",{attrs:{label:"会员等级","label-class-name":"detail-label"}},[a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(e.getLevelName(e.detailMember.memberLevelId)||"普通会员"))])],1),e._v(" "),a("el-descriptions-item",{attrs:{label:"账户余额","label-class-name":"detail-label"}},[a("span",{staticClass:"detail-value balance"},[e._v(e._s(e.detailMember.balance||0)+" 元")])]),e._v(" "),a("el-descriptions-item",{attrs:{label:"注册时间","label-class-name":"detail-label"}},[a("span",{staticClass:"detail-value"},[e._v(e._s(e._f("formatDateTime")(e.detailMember.createTime)))])]),e._v(" "),a("el-descriptions-item",{attrs:{label:"最后登录","label-class-name":"detail-label"}},[a("span",{staticClass:"detail-value"},[e._v(e._s(e._f("formatDateTime")(e.detailMember.lastLoginTime)))])]),e._v(" "),a("el-descriptions-item",{attrs:{label:"状态",span:"2","label-class-name":"detail-label"}},[a("el-tag",{staticClass:"status-tag",attrs:{type:1===e.detailMember.status?"success":"danger"}},[e._v("\n              "+e._s(1===e.detailMember.status?"启用":"禁用")+"\n            ")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"积分记录",name:"pointRecord"}},[a("div",{staticClass:"point-record-container"},[a("div",{staticClass:"point-record-filter",staticStyle:{"margin-bottom":"15px",display:"flex","justify-content":"flex-end"}},[a("el-form",{attrs:{inline:!0,model:e.pointRecordQuery,size:"mini"}},[a("el-form-item",{attrs:{label:"变动方向："}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"全部方向",clearable:""},model:{value:e.pointRecordQuery.changeType,callback:function(t){e.$set(e.pointRecordQuery,"changeType",t)},expression:"pointRecordQuery.changeType"}},[a("el-option",{attrs:{label:"全部方向",value:""}}),e._v(" "),a("el-option",{attrs:{label:"积分增加",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"积分减少",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"积分来源："}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"全部来源",clearable:""},model:{value:e.pointRecordQuery.sourceType,callback:function(t){e.$set(e.pointRecordQuery,"sourceType",t)},expression:"pointRecordQuery.sourceType"}},[a("el-option",{attrs:{label:"全部来源",value:""}}),e._v(" "),a("el-option",{attrs:{label:"购物",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"管理员修改",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"充值",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"签到",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"补签",value:"4"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"时间范围："}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini"},model:{value:e.pointRecordQuery.timeRange,callback:function(t){e.$set(e.pointRecordQuery,"timeRange",t)},expression:"pointRecordQuery.timeRange"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:function(t){return e.getPointRecord(e.detailMember.id)}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:function(t){return e.resetPointRecordQuery()}}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.pointRecordLoading,expression:"pointRecordLoading"}],staticClass:"point-record-table",attrs:{data:e.pointRecordList,border:"",stripe:"","header-cell-style":{background:"#f5f7fa",color:"#606266",fontWeight:"600"},"cell-style":{padding:"12px 8px"}}},[a("el-table-column",{attrs:{label:"变动时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDateTime")(t.row.createTime)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"变动类型",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.getPointTypeTag(t.row.changeType)}},[e._v("\n                  "+e._s(e.getPointTypeName(t.row))+"\n                ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"变动积分",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:0===t.row.changeType?"text-success":"text-danger"},[e._v("\n                  "+e._s(0===t.row.changeType?"+":"-")+e._s(t.row.changeCount)+"\n                ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作人",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.operateMan||"系统")+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.operateNote||"-")+"\n              ")]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container",staticStyle:{"margin-top":"15px"}},[a("el-pagination",{staticClass:"custom-pagination",attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-size":e.pointRecordPageSize,"page-sizes":[10,15,20],total:e.pointRecordTotal},on:{"size-change":e.handlePointRecordSizeChange,"current-change":e.handlePointRecordCurrentChange},model:{value:e.pointRecordCurrentPage,callback:function(t){e.pointRecordCurrentPage=t},expression:"pointRecordCurrentPage"}})],1)],1)])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"close-btn",attrs:{size:"small"},on:{click:function(t){e.detailDialogVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"edit-dialog",attrs:{title:e.isEdit?"编辑会员":"添加会员",visible:e.dialogVisible,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"memberForm",staticClass:"member-form",attrs:{model:e.member,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"会员名称："}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入会员名称","prefix-icon":"el-icon-user"},model:{value:e.member.nickname,callback:function(t){e.$set(e.member,"nickname",t)},expression:"member.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名：",prop:"username"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入用户名","prefix-icon":"el-icon-user"},model:{value:e.member.username,callback:function(t){e.$set(e.member,"username",t)},expression:"member.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码：",prop:"password"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"password",placeholder:"请输入密码","show-password":!0,"prefix-icon":"el-icon-lock"},model:{value:e.member.password,callback:function(t){e.$set(e.member,"password",t)},expression:"member.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码："}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入手机号码","prefix-icon":"el-icon-phone"},model:{value:e.member.phone,callback:function(t){e.$set(e.member,"phone",t)},expression:"member.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"积分："}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"请输入积分","prefix-icon":"el-icon-coin"},model:{value:e.member.integration,callback:function(t){e.$set(e.member,"integration",t)},expression:"member.integration"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱："}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入邮箱","prefix-icon":"el-icon-message"},model:{value:e.member.email,callback:function(t){e.$set(e.member,"email",t)},expression:"member.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"会员等级："}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择会员等级","prefix-icon":"el-icon-rank"},model:{value:e.member.memberLevelId,callback:function(t){e.$set(e.member,"memberLevelId",t)},expression:"member.memberLevelId"}},e._l(e.memberLevels,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"账户余额："}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"请输入账户余额","prefix-icon":"el-icon-money"},model:{value:e.member.balance,callback:function(t){e.$set(e.member,"balance",t)},expression:"member.balance"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否启用："}},[a("el-radio-group",{model:{value:e.member.status,callback:function(t){e.$set(e.member,"status",t)},expression:"member.status"}},[a("el-radio",{staticClass:"status-radio",attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio",{staticClass:"status-radio",attrs:{label:0}},[e._v("禁用")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-btn",attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"confirm-btn",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleDialogConfirm()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{staticClass:"recharge-dialog",attrs:{title:"积分充值",visible:e.rechargeDialogVisible,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.rechargeDialogVisible=t}}},[a("div",{staticClass:"recharge-header"},[a("div",{staticClass:"member-info-card"},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label"},[e._v("会员编号：")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e.rechargeForm.memberInfo&&e.rechargeForm.memberInfo.id))])]),e._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label"},[e._v("会员名称：")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e.rechargeForm.memberInfo&&e.rechargeForm.memberInfo.nickname))])]),e._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label"},[e._v("用户名：")]),e._v(" "),a("span",{staticClass:"info-value"},[e._v(e._s(e.rechargeForm.memberInfo&&e.rechargeForm.memberInfo.username))])]),e._v(" "),a("div",{staticClass:"info-item"},[a("span",{staticClass:"info-label"},[e._v("当前积分：")]),e._v(" "),a("span",{staticClass:"info-value current-integration"},[e._v(e._s(e.rechargeForm.memberInfo&&e.rechargeForm.memberInfo.currentIntegration||0))])])])]),e._v(" "),a("el-form",{staticClass:"recharge-form",attrs:{model:e.rechargeForm,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"充值积分：",required:""}},[a("el-input",{staticClass:"recharge-input",attrs:{placeholder:"请输入充值积分数",type:"number",min:"1"},model:{value:e.rechargeForm.integration,callback:function(t){e.$set(e.rechargeForm,"integration",e._n(t))},expression:"rechargeForm.integration"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"el-icon-coin"})])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注说明："}},[a("el-input",{staticClass:"remark-input",attrs:{placeholder:"请输入充值备注（如：双11活动充值、补赠积分）",type:"textarea",rows:3,clearable:""},model:{value:e.rechargeForm.operateNote,callback:function(t){e.$set(e.rechargeForm,"operateNote",t)},expression:"rechargeForm.operateNote"}},[a("template",{slot:"prepend"},[a("i",{staticClass:"el-icon-document"})])],2)],1)],1),e._v(" "),a("div",{staticClass:"recharge-note"},[a("i",{staticClass:"el-icon-info"}),e._v("\n      积分充值后不可撤回，请谨慎操作\n    ")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-btn",attrs:{size:"small"},on:{click:function(t){e.rechargeDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticClass:"confirm-btn",attrs:{type:"primary",size:"small"},on:{click:e.handleRechargeConfirm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(p,b,!1,function(e){a("xFHz")},"data-v-6bec3a00",null);t.default=g.exports},Gu7T:function(e,t,a){"use strict";t.__esModule=!0;var i,n=a("c/Tr"),l=(i=n)&&i.__esModule?i:{default:i};t.default=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return(0,l.default)(e)}},xFHz:function(e,t){}});
//# sourceMappingURL=21.00ff84c58949d9b82546.js.map